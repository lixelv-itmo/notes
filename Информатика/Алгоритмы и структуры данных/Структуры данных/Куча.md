## Определение
Куча ([англ.](https://ru.wikipedia.org/wiki/%D0%90%D0%BD%D0%B3%D0%BB%D0%B8%D0%B9%D1%81%D0%BA%D0%B8%D0%B9_%D1%8F%D0%B7%D1%8B%D0%BA "Английский язык") Maxheap) — структура данных, разновидность [бинарного дерева](Бинарное%20дерево.md), где каждый родитель больше своих потомков по значению. 

---
## Сложность и визуализация
--- start-multi-column: ExampleRegion1  
```column-settings  
number of columns: 2  
Border: false
Shadow: false
```

- **Вставка:** $O(\log n)$
- **Чтение максимума:** $O(1)$
- **Удаление максимума:** $O(\log n)$
- **Затраты памяти:** $O(n)$

--- end-column ---

![](maxheap.png)

--- end-multi-column

---
## Реализация на C++
```cpp
#include <vector>
#include <algorithm>

template <typename T>
class MaxHeap {
    using CompareFunction = bool (*)(T, T);

public:
    MaxHeap(CompareFunction cmp = [](T a, T b){ return a > b; })
    : cmp(cmp) {}

    ~MaxHeap() = default;

    void push(T val) {
        data.push_back(val);
        siftUp(data.size() - 1);
    }

    void pop() {
        if (data.empty()) return;
        std::swap(data.front(), data.back());
        data.pop_back();
        if (!data.empty()) siftDown(0);
    }

    T* top() {
        if (data.empty()) return nullptr;
        return &data.front();
    }

    size_t size() const { return data.size(); }
    bool empty() const { return data.empty(); }
    void clear() { data.clear(); }

private:
    std::vector<T> data;
    CompareFunction cmp;

    void siftUp(size_t idx) {
        while (idx > 0) {
            size_t parent = (idx - 1) / 2;
            if (cmp(data[idx], data[parent])) {
                std::swap(data[idx], data[parent]);
                idx = parent;
            } else break;
        }
    }

    void siftDown(size_t idx) {
        size_t n = data.size();
        while (true) {
            size_t l = idx * 2 + 1;
            size_t r = idx * 2 + 2;
            size_t best = idx;

            if (l < n && cmp(data[l], data[best])) best = l;
            if (r < n && cmp(data[r], data[best])) best = r;

            if (best == idx) break;
            std::swap(data[idx], data[best]);
            idx = best;
        }
    }
};
```

---
## [Wiki](https://ru.wikipedia.org/wiki/Куча_(структура_данных)) [DSA](https://www.geeksforgeeks.org/dsa/introduction-to-max-heap-data-structure/)